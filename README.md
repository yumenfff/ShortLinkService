__ShortLinkService__ - это учебное консольное приложение на Java, реализующее создание и управление короткими ссылками

### Основные возможности

---
#### Управление короткими ссылками
- Генерация уникальной короткой ссылки
- Проверка корректности URL
- Установка и редактирование лимита кликов для короткой ссылки
- Установка и редактирование времени жизни для короткой ссылки (TTL)
- Автоматическое удаление короткой ссылки при истечении TTL или исчерпании кликов
- Открытие ссылки в браузере
- Удаление короткой ссылки
- Получение полной информации о короткой ссылке

---
#### Многопользовательский режим
- Каждый запуск создаёт нового пользователя
- Возможность переключения между пользователями

---
#### Автоматическая очистка
Фоновая задача каждую секунду удаляет:
- Короткие ссылки у которых закончилось TTL
- Короткие ссылки у которых закончился лимит кликов

---
#### Файловое хранение
Все данные хранятся в файле `data.json`:
- ссылки
- пользователи

Файл автоматически загружается при запуске и сохраняется при изменениях

---
### Установка и запуск
#### Требования для запуска:
- Maven (для сборки)
- Java 17+

---
#### 1. Клонирование репозитория
```
git clone https://github.com/yumenfff/ShortLinkService
cd ShortLinkService
```

---
#### 2. Сборка
```
mvn clean package
```

---
#### 3. Запуск
```
java -jar target/shortlink.jar
```

---
### Конфигурация

Приложение использует отдельный конфигурационный файл, расположенный в:
`src/main/resources/config.properties`

---
#### Доступные параметры:
- `shortlink.length` - длина генерируемой короткой ссылки
- `default.ttl.seconds` - TTL ссылки в секундах (0 - нет лимита)
- `default.max.clicks` - максимальное количество кликов (0 - нет лимита)
- `data.file` - файл для хранения данных

---
### Примеры использования приложения:
#### 1. Узнать UUID текущего пользователя:
```
whoami
```

---
#### 2. Переключиться на другого пользователя:
```
setuid <uuid>
```

---
#### 3. Создать короткую ссылку
```
create <URL> [лимит кликов] [TTL в сек]
```
```
create https://google.com
create https://google.com 5
create https://google.com 5 3600
```

---
#### 4. Получить полную информацию о ссылке
```
info <короткая ссылка>
```

Вывод:
```
Информация о ссылке:
Короткая ссылка: CeNZPw
URL: https://google.com
Владелец: 050ef7bb-d3ef-4587-a30a-aad83958032b [Вы]
Переходов: 0/∞
Создана: 2025-11-17 19:47:46
TTL: 86393 сек из 86400 сек
```

---
#### 5. Редактировать ссылку (только для владельца ссылки)
```
edit <короткая ссылка> limit <значение>
edit <короткая ссылка> ttl <значение>
```

---
### Тестирование
Проект покрыт модульными тестами на JUnit 5

Запуск тестов:
```
mvn test
```

#### Покрыты сценарии:
- создание ссылок
- валидация URL
- уникальность кодов
- истечение TTL
- лимит кликов
- удаление ссылок
- изменение параметров
- работа хранилища

Тесты используют временный файл `test_data.json`, который очищается перед запуском

---
### GitHub Actions
В проекте настроены два CI/CD pipeline через GitHub Actions:
1. Сборка, тестирование и деплой (`.github/workflows/ci-cd.yml`), обеспечивающий:
- Кроссплатформенную сборку и тестирование на 4 операционных системах:
    - Linux (`ubuntu-latest`)
    - Windows (`windows-latest`)
    - macOS Intel (`macos-15-intel`)
    - macOS Apple Silicon (`macos-latest`)
- Разделение на этапы:
    - `build` - компиляция проекта
    - `test` - запуск JUnit 5 тестов
    - `deploy` - доставка исполняемого JAR-файла на виртуальную машину в Yandex Cloud через SSH
- Автоматический запуск pipeline:
    - при каждом пуше в ветку `main`
    - при создании pull request в `main`

После успешного прохождения всех тестов исполняемый JAR-файл копируется на удалённый сервер в директорию `~/shortlink/target/`

2. Генерация SBOM и анализ уязвимостей (`.github/workflows/security-sbom.yml`):
- Генерация SBOM в формате CycloneDX с помощью официального Maven-плагина (`cyclonedx-maven-plugin`)
- Сканирование зависимостей через OWASP Dependency-Check
- Запускается только при создании или обновлении pull request в ветку main
- Артефакты:
    - bom.json - SBOM-файл
    - dependency-check-report.* - отчёты в HTML, JSON и XML
- Срок хранения артефактов: 7 дней

---
### Stack:
- Java 17
- Maven
- Jackson
- JUnit 5
- GitHub Actions
